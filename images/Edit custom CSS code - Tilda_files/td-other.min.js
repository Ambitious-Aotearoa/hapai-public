function td__drawPreload(e){td__drawBody(e),td__drawMenu()}function td__drawGlobal(e){document.querySelector(".td-maincontainer")&&(document.body.innerHTML=""),window.csrf&&document.getElementById("csrf").setAttribute("content",window.csrf),window.lang&&document.body.setAttribute("data-lang",window.lang),td__drawBody(e),td__drawMenu(),"object"==typeof e&&!0===e.nofooter||td__drawFooter(),"function"==typeof td__help__showBubble&&td__help__showBubble()}function td__drawBody(e){e='<div id="loadicon" class="spinner" style="display:none;"></div><div class="td-menucontainer"></div><div class="td-maincontainer" style="'+("object"==typeof e&&"string"==typeof e.mcbgcolor?"background-color:"+e.mcbgcolor+";":"background-color:#fff;")+'min-height:calc(100vh - 60px);"></div><div class="td-footercontainer"></div>';document.body.insertAdjacentHTML("beforeend",e)}function td__drawBreadcrumbs(e){if("object"==typeof e){for(var t="https://tilda."+window.location.hostname.split(".").pop(),o=(o="")+'<div class="td-breadcrumbs">'+'<div class="td-breadcrumbs__list">',n=0;n<e.length;n++){var r,i=e[n],a="";void 0!==i.def?"myprojects"==i.def?(r=t+"/projects/",a="{{dashboard}}"):"project"==i.def?(r=t+"/projects/?projectid="+i.prid,a=(a=i.prt)||"{{my_project}}"):"ss"==i.def?(r=t+"/projects/settings/?projectid="+i.prid+(void 0!==i.tab?"#tab="+i.tab:""),a="{{site_settings}}"):"identity"==i.def?(r=t+"/identity/",a="{{profile}}"):"plans"==i.def?(r=t+"/identity/plan/",a="{{plans_and_billing}}"):"domains"==i.def&&(r=t+"/domains/",a="{{domains}}"):(r=i.l,a=i.t),o=(o+='<div class="td-breadcrumbs__item'+(n===e.length-1?" td-breadcrumbs__item_last":"")+(20<=a.length?" td-breadcrumbs__item_long":"")+'">')+(""===r?'<span class="td-breadcrumbs__link" style="opacity:0.7;">'+a+"</span>":'<a class="td-breadcrumbs__link" href="'+r+'">'+a+"</a>")+"</div>",n!==e.length-1&&(o+='<div class="td-breadcrumbs__item td-breadcrumbs__item_arrow">→</div>')}o=td__other__translate(o=o+"</div>"+"</div>"),document.querySelector(".td-maincontainer").insertAdjacentHTML("afterbegin",o)}}function td__load(r,i,a,o){"noloader"!==(a="object"!=typeof a?{}:a).loadicon&&("corner"===a.loadicon?showLoadIcon:showCentralLoadIcon)();var s=Date.now(),e=(void 0!==window.xhr_get&&window.xhr_get.abort(),"/page/publish/"===r?35:20);function n(e,t){var o,n=Date.now()-s;console.log(e.status),console.log(t),"abort"===t?(o=document.getElementById("noactionlayer"))&&(o.style.display="none"):400<=e.status?(td__drawpageerror(e.status,"(Action: Get "+a.ctext.replace(/^get/i,"").trim()+")"),logAjaxError(r,i,"comm: "+i.comm+", (td__load)",e.status,{ts_delta:parseInt(n/1e3),exception:t,ui:a})):0==e.status&&n<100?"function"==typeof tc__showDialog?tc__showDialog({msg:"Request error (get "+a.ctext+"). Please check your Internet connection and try again."},"alert"):alert("Request error (get "+a.ctext+"). Please check your Internet connection and try again."):(logNetworkError("ajax",r,i,n/1e3,{}),"function"==typeof tc__showDialog?tc__showDialog({msg:"Request timeout (get "+a.ctext+"). Please reload the page and try again."},"alert"):alert("Request timeout (get "+a.ctext+"). Please reload the page and try again.")),"/page/publish/"==r&&(o=document.getElementById("loadicon-progress"))&&(o.parentElement.innerHTML="Error!")}function d(){delete window.xhr_get,hideCentralLoadIcon(),hideLoadIcon()}window.xhr_get=new XMLHttpRequest,window.xhr_get.open("POST",r,!0),window.xhr_get.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),window.xhr_get.responseType="text",window.xhr_get.timeout=1e3*e,window.xhr_get.addEventListener("loadend",function(){if(tc__checkServerError&&tc__checkServerError(this))tc__drawServerError(this.responseText);else{if(200<=this.status&&this.status<400){var e,t=this.responseText;if("function"==typeof check_logout&&check_logout(t),""==t)"function"==typeof tc__showDialog?tc__showDialog({msg:"Error. Empty response from server"},"alert"):alert("Error. Empty response from server");else{if("bsf"==t.substring(0,3))try{t=bsfdunicode(t.substring(3))}catch(e){console.log("error bsf")}"{"===t.substring(0,1)||"["===t.substring(0,1)?"object"==typeof(e=td__parseJson(t))?o(e=null===e?{}:e):(console.log("Error response. Can not parse response from server: "+t),document.body.innerHTML=t):(console.log("Error response from server: "+t),"/page/publish/"==r?td__pagePublish_showerrors(t):("Sorry, you do not have rights to this action"!=t&&"Извините, у вас нет прав на это действие"!=t||(t='<div style="font-size:20px; padding:40px; line-height:1.5;">'+t+"</div>",t+='<div style="font-size:12px; padding:40px; padding-top:0;">',"/projects/get/getsitesettings/"==r&&void 0!==i.projectid&&(t+=td__other__translate("{{owner_restricted_access|projectid}}",{projectid:i.projectid})),t+='<br><br><a href="javascript:window.history.back();">{{go_back}}</a></div>'),t=td__other__translate(t="Project does not exist!"==t?'<div style="font-size:20px; padding:40px; line-height:1.5;">'+t+"</div>":t),document.body.innerHTML=t)),-1===t.indexOf("Sorry, you don't have permission to perform this action")&&-1===t.indexOf("Извините, у вас нет прав на это действие")||!document.body.classList.contains("td-body_popup-opened")||document.body.classList.remove("td-body_popup-opened")}}else n(this);d()}}),window.xhr_get.addEventListener("timeout",function(){n(this,"timeout"),d()}),window.xhr_get.addEventListener("abort",function(){n(this,"abort"),d()}),window.xhr_get.addEventListener("error",function(){n(this,"error"),d()}),i?window.xhr_get.send(td__encodeData(i)):window.xhr_get.send()}function td__submit(r,i,a,t){var s=document.querySelector(a.preview),o=document.querySelector(a.btn),d=(s&&(s.style.display="none",s.innerHTML=""),o&&(o.style.pointerEvents="none",o.style.opacity="0.3"),o&&"string"==typeof a.btntext&&(o.setAttribute("data-btn-progress-text",o.value),o.value=a.btntext),i.csrf=getCSRF(),event&&event.preventDefault(),Date.now());function e(e,t){var o,n=Date.now()-d;console.log(e.status),console.log(t),"abort"!==t&&(400<=e.status?(s&&(s.style.display="block",s.innerHTML="System error ("+a.ctext+"). Please reload the page and try again."),o="unknown",void 0!==i.comm?o=i.comm:void 0!==i[0].name&&"comm"==i[0].name&&void 0!==i[0].value&&(o=i[0].value),logAjaxError(r,i,"comm:"+o+", (td__submit)",e.status,{ts_delta:parseInt(n/1e3),exception:t,ui:a})):0==e.status&&n<100?s&&(s.style.display="block",s.innerHTML="Request error ("+a.ctext+"). Please check your Internet connection and try again."):(s&&(s.style.display="block",s.innerHTML="Request timeout ("+a.ctext+"). Please reload the page and try again."),logNetworkError("ajax",r,i,n/1e3,{})))}function n(){o&&(o.style.pointerEvents="auto",o.style.opacity="1");var e=o&&o.getAttribute("data-btn-progress-text");e&&(o.value=e,o.removeAttribute("data-btn-progress-text")),delete window.xhr_submit,hideLoadIcon()}showLoadIcon(),window.xhr_submit&&window.xhr_submit.abort(),window.xhr_submit=new XMLHttpRequest,window.xhr_submit.open("POST",r,!0),window.xhr_submit.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),window.xhr_submit.responseType="text",window.xhr_submit.timeout=2e4,window.xhr_submit.addEventListener("loadend",function(){var e;tc__checkServerError&&tc__checkServerError(this)?tc__drawServerError(this.responseText):200<=this.status&&this.status<400&&(e=this.responseText,"function"==typeof check_logout&&check_logout(e),t(e),n())}),window.xhr_submit.addEventListener("timeout",function(){e(this,"timeout"),n()}),window.xhr_submit.addEventListener("abort",function(){e(this,"abort"),n()}),window.xhr_submit.addEventListener("error",function(){e(this,"error"),n()}),i?window.xhr_submit.send(td__encodeData(i)):window.xhr_submit.send()}function showCentralLoadIcon(){"number"==typeof window.centralloadicon_timerid&&clearTimeout(window.centralloadicon_timerid),window.centralloadicon_timerid=setTimeout(function(){document.getElementById("centralloadicon")||document.body.insertAdjacentHTML("beforeend",'<div id="centralloadicon" class="threedotsspinner"><div class="threedotsspinner-bounce1"></div><div class="threedotsspinner-bounce2"></div><div class="threedotsspinner-bounce3"></div></div>'),document.getElementById("centralloadicon").style.display="block"},1e3)}function hideCentralLoadIcon(){clearTimeout(window.centralloadicon_timerid);var e=document.getElementById("centralloadicon");e&&e.remove()}function getUrlParameter(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]==e)return n[1]}}function td__parseJson(t){try{var e=JSON.parse(t);return"object"==typeof e?e:(console.log("error parse json"),console.log(t),"error")}catch(e){return console.log("Error parse server response! error:"+e),console.log(t),"error"}}function td__getFormObj(e){var o;return Object.getPrototypeOf(e).jquery&&!(e=e[0])?{}:(o={},e=e.querySelectorAll("input[name], select[name]"),Array.prototype.forEach.call(e,function(e){var t=e.name;"checkbox"===e.type?o[t]=e.checked?"on":"":o[t]=e.value}),o)}function td__common__objtowindow(e){var t;window.lang=cleanUndefined(e.lang),window.csrf=cleanUndefined(e.csrf),window.lang&&document.body.setAttribute("data-lang",window.lang),window.csrf&&document.getElementById("csrf").setAttribute("content",window.csrf),window.we_are_now_in=cleanUndefined(e.we_are_now_in),void 0===e.username?void 0!==window.localStorage&&((t=localStorage.getItem("uname"))?window.username=t:sessionStorage&&sessionStorage.getItem("uname")&&(window.username=sessionStorage.getItem("uname"))):window.username=cleanUndefined(e.username),window.userplan=cleanUndefined(e.userplan)}function escapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})}function replaceUnicode(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#039;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};return String(e).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#039;|&#x2F;|&#x60;|&#x3D;/g,function(e){return t[e]})}function turesizeurl(e,t){var o;return void 0!==e&&""!=e&&null!=e&&!(0<e.indexOf(".svg")||0<e.indexOf(".gif")||0<e.indexOf(".ico")||-1===e.indexOf("static.tildacdn.com")||0<e.indexOf("-/empty/")||0<e.indexOf("-/resize/")||0<e.indexOf("-/resizeb/")||0<e.indexOf("/lib/emoji/")||-1<e.indexOf("/-/"))&&0<t?((o=e.split("/")).splice(e.split("/").length-1,0,"-/resize/"+t+"x"),o.join("/")):e}function stripTags(e){return e="object"!=typeof e?e&&e.replace(/(<([^>]+)>)/gi,""):e}function t_throttle(n,r,i){var a,s;return r=r||250,function(){var e=i||this,t=+new Date,o=arguments;a&&t<a+r?(clearTimeout(s),s=setTimeout(function(){a=t,n.apply(e,o)},r)):(a=t,n.apply(e,o))}}function punicodeDomain(e){if("string"!=typeof e||""==e||null==e)return e;if("object"!=typeof punycode)return e;var t=e,o="";if("http://"===e.substring(0,7)&&(e=e.replace("http://",""),o="http://"),"https://"===e.substring(0,8)&&(e=e.replace("https://",""),o="https://"),"xn--"!==e.substring(0,4))return t;try{t=o+""+punycode.ToUnicode(e)}catch(e){console.log("error punicode: "+t)}return t}function td__drawpageerror(e,t){document.body.innerHTML='<div class="td__error500notice" style="max-width: 450px; color:#000; z-index:100000;"><div style="padding:40px;"><div><b>Server error: '+e+"</b>"+("404"==e?" Page not found":"")+"<br><br>Sorry, it looks like we have an internal server error."+(t?"<br>"+t:"")+'<br><br>Please wait for a minute, reload the page, and try again.<br><br>If you continue to see this message multiple times, please contact us at: <a href="mailto:team@tilda.cc" style="text-decoration:underline;">team@tilda.cc</a></div><div><br><br><img src="/tpl/img/broken-robot.png" width="90px"></div><br></div></div>'}function td__drawpagenotfound(){document.body.innerHTML='<div class="td__error404notice" style="max-width: 450px; color:#000; z-index:100000;"><div style="padding:40px;"><div><b>Error: 404. Page not found</b><br><br>Sorry, it looks like the page was not found.</div><div><br><br><img src="/tpl/img/broken-robot.png" width="90px"></div><br></div></div>'}function td__checkCollabAccess(e){var t;return!window.project||"y"!==window.project.shared||!!(t=Array.isArray(window.project.roles)?window.project.roles:[]).includes("all")||"publish"!==e||t.includes("pg_p")}function getCookie(e){e=("; "+document.cookie).split("; "+e+"=");if(2==e.length)return e.pop().split(";").shift()}function setCookie(e,t,o){var n,r,i=(o=o||{}).expires,a=("number"==typeof i&&i&&((n=new Date).setTime(n.getTime()+1e3*i),i=o.expires=n),i&&i.toUTCString&&(o.expires=i.toUTCString()),e+"="+(t=encodeURIComponent(t)));for(r in o){a+="; "+r;var s=o[r];!0!==s&&(a+="="+s)}document.cookie=a}function dateformat(e,t){if(!(1048561077<e))return"";""==t&&(t="RU"==lang?"d.m.y":"d mon, y");var e=new Date(1e3*e),o=e.getFullYear(),n=(n=e.getMonth()+1)<10?"0"+n:n,r=(r=e.getDate())<10?"0"+r:r,i=(i=e.getHours())<10?"0"+i:i,e=(e=e.getMinutes())<10?"0"+e:e,a="";return"d.m.y"==t?a=r+"."+n+"."+o:"d mon, y"==t?a=r+"."+["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][parseInt(n,10)-1]+"."+o:"h:m"==t&&(a=i+":"+e),a}function cleanUndefined(e){return e=empty(e)?"":e}function empty(e){var t=typeof e;if("undefined"==t)return!0;if("boolean"==t)return!e;if(null===e)return!0;if(void 0===e)return!0;if(e instanceof Array){if(e.length<1)return!0}else if("string"==t){if(e.length<1)return!0;if("0"===e)return!0}else if("object"==t){if(Object.keys(e).length<1)return!0}else if("number"==t&&0===e)return!0;return!1}function number_format(e,t,o,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+e)?+e:0,t=isFinite(+t)?Math.abs(t):0,n=void 0===n?",":n,o=void 0===o?".":o,r="";return 3<(r=(t?function(e,t){t=Math.pow(10,t);return""+Math.round(e*t)/t}(e,t):""+Math.round(e)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(o)}function td__makenotundefined_arr_items(e,t){var o,n=(t=t.replace(/\s/g,"")).split(",");for(o in n)"object"!=typeof e[n[o]]&&empty(e[n[o]])&&(e[n[o]]="");return e}function bsfdunicode(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function in_array(e,t){if("object"==typeof t&&("number"==typeof e||"string"==typeof e))for(var o=0,n=t.length;o<n;o++)if(t[o]==e)return!0;return!1}function td__other__translate(o,n,r){void 0===r&&(r=window.lang||(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2));var i,a,s={dashboard:{RU:"Мои сайты",EN:"Dashboard",DE:"Dashboard",ES:"Mis sitios",PT:"Painel"},my_project:{RU:"Мой проект",EN:"My Project",DE:"Mein Projekt",ES:"Mi proyecto",PT:"Meu Projeto"},site_settings:{RU:"Настройки сайта",EN:"Site Settings",DE:"Website-Einstellungen",ES:"Ajustes del sitio",PT:"Configurações do Site"},profile:{RU:"Профиль",EN:"Profile",DE:"Profil",ES:"Perfil",PT:"Perfil"},plans_and_billing:{RU:"Тарифы и оплата",EN:"Plans and Billing",DE:"Pläne und Abrechnung",ES:"Planes y facturación",PT:"Planos e cobrança"},domains:{RU:"Мои домены",EN:"Domains",DE:"Domains",ES:"Dominios",PT:"Domínios"},owner_restricted_access:{RU:'Владелец проекта ограничил вам доступ к настройкам сайта.<br>Вы можете <a href="/projects/collaborators/unfollow/?projectid=${projectid}" style="color:#fb866c;">покинуть проект</a>, если не хотите видеть этот проект в списке сайтов и иметь к нему доступ. Сайт останется в исходном аккаунте, но у вас не будет к нему доступа.',EN:'Project owner has restricted your access to the Site Settings.<br>You can <a href="/projects/collaborators/unfollow/?projectid=${projectid}" style="color:#fb866c;">leave the project</a> if you don\'t want to see this project in your website\'s list and to have the access anymore. The website remains in an original account but you won\'t have access to it.',DE:'Der:die Projekteigentümer:in hat Ihren Zugriff auf die Website-Einstellungen eingeschränkt.<br>Sie können <a href="/projects/collaborators/unfollow/?projectid=${projectid}" style="color:#fb866c;">das Projekt verlassen</a>, wenn Sie dieses Projekt nicht mehr in der Liste Ihrer Website sehen und keinen Zugriff mehr darauf haben möchten. Die Website bleibt in einem ursprünglichen Konto, aber Sie werden keinen Zugriff mehr darauf haben.',ES:'El administrador del proyecto ha restringido su acceso a los Ajustes del sitio.<br>Puede <a href="/projects/collaborators/unfollow/?projectid=${projectid}" style="color:#fb866c;">abandonar el proyecto</a> si ya no desea ver este proyecto en su lista de sitios web ni tener acceso al mismo. El sitio web permanecerá en la cuenta original, pero usted ya no tendrá acceso al mismo.',PT:'O proprietário do projeto restringiu seu acesso às configurações do site.<br>Você pode <a href="/projects/collaborators/unfollow/?projectid=${projectid}" style="color:#fb866c;">sair do projeto</a> se não quiser vê-lo na lista do seu site e não quiser mais ter acesso. O site continuará na conta original, mas você não terá mais acesso a ele.'},go_back:{RU:"Вернуться назад",EN:"Go back",DE:"Zurück",ES:"Regresar",PT:"Voltar"}},e=o.match(/\{\{(.[^}]*)\}\}/g);return e&&e.forEach(function(e){i=e.slice(2,e.length-2).split("|")[0];var t=(a="object"==typeof s[i]&&"string"==typeof s[i][r]&&""!=s[i][r]?s[i][r]:"object"==typeof s[i]&&"string"==typeof s[i].EN&&""!=s[i].EN?s[i].EN:i).match(/\$\{(.[^}]*)\}/g);t&&t.forEach(function(e){var t=e.slice(2,e.length-1);n&&void 0!==n[t]&&(a=a.replace(e,n[t]))}),o=o.replace(e,a)}),o}String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},String.prototype.truncate=function(e,t){t=this.length>e?"string"==typeof t?t:"...":"";return this.substring(0,e)+t};
